{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app.min.js","src/app/app.js","src/app/controllers/CollectCtrl.js","src/app/controllers/SelectCtrl.js","src/app/filters/featureFilter.js","src/app/filters/labelFilter.js","src/app/services/ModelService.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_interopRequireDefault","obj","__esModule","default","_controllersSelectCtrl","_controllersSelectCtrl2","_controllersCollectCtrl","_controllersCollectCtrl2","_servicesModelService","_servicesModelService2","_filtersFeatureFilter","_filtersFeatureFilter2","_filtersLabelFilter","_filtersLabelFilter2","angular","service","controller","filter","features","labels","getFeatures","getLabels","setConfig","_features","_labels","config","$httpProvider","$stateProvider","$urlRouterProvider","state","url","templateUrl","otherwise","./controllers/CollectCtrl","./controllers/SelectCtrl","./filters/featureFilter","./filters/labelFilter","./services/ModelService",2,"Object","defineProperty","value","$scope","$filter","$location","$templateRequest","$sce","sharedConfig","uniqid","pr","en","this","seed","w","parseInt","toString","slice","Array","join","Date","getTime","Math","floor","random","toFixed","ua","detect","parse","navigator","userAgent","sandbox","send","data","console","log","id","timestamp","now","useragent","device","manufacturer","name","browser","family","major","json","JSON","stringify","req","XMLHttpRequest","open","sensor","setRequestHeader","HTML","sensors","forEach","key","html","then","sensorHTML","trustAsHtml","window","feature","push","timerRunning","start","deadline","$broadcast","stop","path",3,"ModelService","$watch","newVal","oldVal","scope","loadLabels","$query","response","label","toLowerCase","indexOf","next","index","replace",4,"_toConsumableArray","arr","isArray","arr2","from","featureFilter","input","result","entry","concat","Set","support","Modernizr",5,"labelFilter",6,"_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","$http","$q","$inject","deferred","defer","get","resolve","promise"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\n'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _controllersSelectCtrl = require('./controllers/SelectCtrl');\n\nvar _controllersSelectCtrl2 = _interopRequireDefault(_controllersSelectCtrl);\n\nvar _controllersCollectCtrl = require('./controllers/CollectCtrl');\n\nvar _controllersCollectCtrl2 = _interopRequireDefault(_controllersCollectCtrl);\n\nvar _servicesModelService = require('./services/ModelService');\n\nvar _servicesModelService2 = _interopRequireDefault(_servicesModelService);\n\nvar _filtersFeatureFilter = require('./filters/featureFilter');\n\nvar _filtersFeatureFilter2 = _interopRequireDefault(_filtersFeatureFilter);\n\nvar _filtersLabelFilter = require('./filters/labelFilter');\n\nvar _filtersLabelFilter2 = _interopRequireDefault(_filtersLabelFilter);\n\nangular.module('myApp', ['ui.bootstrap', 'ui.router', 'ngTagsInput', 'timer']).service('ModelService', _servicesModelService2['default']).controller('SelectCtrl', _controllersSelectCtrl2['default']).controller('CollectCtrl', _controllersCollectCtrl2['default']).filter('feature', _filtersFeatureFilter2['default']).filter('label', _filtersLabelFilter2['default']).service('sharedConfig', function () {\n  var features = {};\n  var labels = {};\n\n  return {\n    getFeatures: function getFeatures() {\n      return features;\n    },\n    getLabels: function getLabels() {\n      return labels;\n    },\n    setConfig: function setConfig(_features, _labels) {\n      features = _features;\n      labels = _labels;\n    }\n  };\n}).config(['$httpProvider', '$stateProvider', '$urlRouterProvider', function ($httpProvider, $stateProvider, $urlRouterProvider) {\n\n  $stateProvider.state('select', {\n    url: '/select',\n    templateUrl: 'select.html',\n    controller: 'SelectCtrl'\n  }).state('collect', {\n    url: '/collect',\n    templateUrl: 'collect.html',\n    controller: 'CollectCtrl'\n  });\n\n  $urlRouterProvider.otherwise('/select');\n}]);\n\n},{\"./controllers/CollectCtrl\":2,\"./controllers/SelectCtrl\":3,\"./filters/featureFilter\":4,\"./filters/labelFilter\":5,\"./services/ModelService\":6}],2:[function(require,module,exports){\n/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function ($scope, $filter, $location, $templateRequest, $sce, sharedConfig) {\n  'ngInject';\n\n  /* Get previously defined features and labels */\n  var features = sharedConfig.getFeatures();\n  var labels = sharedConfig.getLabels();\n\n  /* Generate unique ID for dataset */\n  var pr = '',\n      en = false,\n      uniqid;\n\n  this.seed = function (s, w) {\n    s = parseInt(s, 10).toString(16);\n    return w < s.length ? s.slice(s.length - w) : w > s.length ? new Array(1 + (w - s.length)).join('0') + s : s;\n  };\n\n  uniqid = pr + this.seed(parseInt(new Date().getTime() / 1000, 10), 8) + this.seed(Math.floor(Math.random() * 0x75bcd15) + 1, 5);\n\n  if (en) uniqid += (Math.random() * 10).toFixed(8).toString();\n\n  /* Parse UserAgent using darcyclarke/Detect.js */\n  var ua = detect.parse(navigator.userAgent);\n\n  /* Sandbox for all feature collect scripts */\n  var sandbox = {\n    send: function send(data) {\n      console.log(data);\n      data.id = uniqid;\n      data.timestamp = Date.now();\n      data.useragent = ua.device.manufacturer + \"_\" + ua.device.name + \"_\" + ua.browser.family + \"_\" + ua.browser.major;\n      data.labels = labels;\n      var json = JSON.stringify(data);\n      if (json !== '{}') {\n        var req = new XMLHttpRequest();\n        req.open('POST', \"http://docker.teco.edu:3000/api/features/\" + data.sensor);\n        req.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n        req.send(json);\n      }\n    }\n  };\n\n  $scope.HTML = \"\";\n\n  var sensors = [];\n\n  features.forEach(function (key) {\n    if (typeof key.html != \"undefined\" && key.html !== \"\") {\n      console.log(\"html/\" + key.html);\n\n      $templateRequest(\"html/\" + key.html).then(function (html) {\n        $scope.sensorHTML = $sce.trustAsHtml(html);\n      });\n    }\n    //$scope.HTML = $scope.HTML + $templateCache.get(\"html/\" + key.html);\n    /*\n    \t\t// DOM: Create the script element\n    \t    var jsElm = document.createElement(\"script\");\n    \t    // set the type attribute\n    \t    jsElm.type = \"application/javascript\";\n    \t    // make the script element load file\n    \t    jsElm.src = \"scripts/\" + key.script;\n    \t    // finally insert the element to the body element in order to load the script\n    \t    document.body.appendChild(jsElm);\n      \t\tjsElm.onload = function() {\n     \t\t};*/\n    //inject.js(\"scripts/\" + key.script, function() {\n    var sensor = new window[key.feature](sandbox);\n    sensors.push(sensor);\n    //});\n  });\n\n  $scope.timerRunning = false;\n\n  $scope.start = function (deadline) {\n    $scope.$broadcast('timer-start');\n    $scope.timerRunning = true;\n    sensors.forEach(function (sensor) {\n      sensor.start();\n    });\n  };\n\n  $scope.stop = function () {\n    console.log(\"stop\");\n    $scope.timerRunning = false;\n    sensors.forEach(function (sensor) {\n      sensor.stop();\n      delete window.sensor;\n    });\n    $location.path(\"/sensor\");\n  };\n};\n\nmodule.exports = exports['default'];\n\n},{}],3:[function(require,module,exports){\n/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function ($scope, $filter, $location, ModelService, sharedConfig) {\n  'ngInject';\n\n  /* Parse UserAgent using darcyclarke/Detect.js */\n  $scope.ua = detect.parse(navigator.userAgent);\n\n  /* Get Features using AJAX and generate sensor dependency list */\n  $scope.features = [];\n  $scope.sensors = [];\n\n  ModelService.getFeatures().then(function (data) {\n    $scope.features = data;\n    $scope.sensors = $filter('feature')($scope.features.data);\n  });\n\n  /* Watch for newly selected features and change sensor depency list accordingly */\n  $scope.$watch('features', function (newVal, oldVal, scope) {\n    $scope.sensors = $filter('feature')($scope.features.data);\n  }, true);\n\n  /* Get Labels and prepare them using mbenford/ngTagsInput */\n  $scope.labels = [];\n\n  $scope.loadLabels = function ($query) {\n    return ModelService.getLabels().then(function (response) {\n      var labels = response.data;\n      return labels.filter(function (label) {\n        return label.name.toLowerCase().indexOf($query.toLowerCase()) != -1;\n      });\n    });\n  };\n\n  /* Advance to collect page */\n  $scope.next = function () {\n    /* Add new labels to database */\n    var labels = [];\n    $scope.labels.forEach(function (label, index) {\n      /* Label variable is undefined for new labels */\n      if (typeof label.label === 'undefined') {\n        /* Generate machine-readable string as identifier (only alphanumeric with dash) */\n        $scope.labels[index].label = label.name.replace(/([^a-z0-9]+)/gi, '-').toLowerCase();\n        var data = {\n          label: label.label,\n          name: label.name\n        };\n        /* Send new label to database */\n        var json = JSON.stringify(data);\n        if (json !== '{}') {\n          var req = new XMLHttpRequest();\n          req.open('POST', \"http://docker.teco.edu:3000/api/labels\");\n          req.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n          req.send(json);\n        }\n      }\n      /* Push each defined label on array */\n      labels.push(label.label);\n    });\n\n    /* Only pass on selected features */\n    var features = $filter('filter')($scope.features.data, {\n      value: true\n    });\n\n    sharedConfig.setConfig(features, labels);\n    $location.path(\"/collect\");\n  };\n};\n\nmodule.exports = exports['default'];\n\n},{}],4:[function(require,module,exports){\n/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = featureFilter;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction featureFilter() {\n  return function (input) {\n    if (typeof input !== 'undefined') {\n      var result = [];\n      input.forEach(function (entry) {\n        if (entry.value === true) {\n          result.push(entry.feature);\n        }\n      });\n      result = [].concat(_toConsumableArray(new Set(result)));\n      var features = [];\n      result.forEach(function (entry) {\n        var feature = {};\n        feature.name = entry;\n        feature.support = Modernizr[entry];\n        features.push(feature);\n      });\n      return features;\n    }\n  };\n}\n\nmodule.exports = exports['default'];\n\n},{}],5:[function(require,module,exports){\n/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = labelFilter;\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\nfunction labelFilter() {\n  return function (input) {\n    if (typeof input !== 'undefined') {\n      var result = [];\n      input.forEach(function (entry) {\n        if (entry.value === true) {\n          result.concat(entry.sensors);\n        }\n      });\n      result = [].concat(_toConsumableArray(new Set(result)));\n      var sensors = [];\n      result.forEach(function (entry) {\n        var sensor = {};\n        sensor.name = entry;\n        sensor.support = Modernizr[entry];\n        sensors.push(sensor);\n      });\n      return sensors;\n    }\n  };\n}\n\nmodule.exports = exports['default'];\n\n},{}],6:[function(require,module,exports){\n/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar ModelService = (function () {\n\n  /*@ngInject*/\n\n  function ModelService($http, $q) {\n    _classCallCheck(this, ModelService);\n\n    this.$http = $http;\n    this.$q = $q;\n  }\n\n  _createClass(ModelService, [{\n    key: 'getFeatures',\n    value: function getFeatures() {\n      var deferred = this.$q.defer();\n      this.$http.get('http://docker.teco.edu:3000/api/features').then(function (data) {\n        deferred.resolve(data);\n      });\n\n      return deferred.promise;\n    }\n  }, {\n    key: 'getLabels',\n    value: function getLabels() {\n      var deferred = this.$q.defer();\n      this.$http.get('http://docker.teco.edu:3000/api/labels').then(function (data) {\n        deferred.resolve(data);\n      });\n\n      return deferred.promise;\n    }\n  }]);\n\n  return ModelService;\n})();\n\nexports['default'] = ModelService;\nmodule.exports = exports['default'];\n\n},{}]},{},[1])\n\n","/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\nimport SelectCtrl from './controllers/SelectCtrl';\nimport CollectCtrl from './controllers/CollectCtrl';\nimport ModelService from './services/ModelService';\nimport featureFilter from './filters/featureFilter';\nimport labelFilter from './filters/labelFilter';\n\nangular.module('myApp', ['ui.bootstrap', 'ui.router', 'ngTagsInput', 'timer'])\n\t.service('ModelService', ModelService)\n\t.controller('SelectCtrl', SelectCtrl)\n\t.controller('CollectCtrl', CollectCtrl)\n\t.filter('feature', featureFilter)\n\t.filter('label', labelFilter)\n\t.service('sharedConfig', function () {\n        var features = {};\n        var labels = {};\n\n        return {\n            getFeatures: function () {\n                return features;\n            },\n            getLabels: function () {\n                return labels;\n            },\n            setConfig: function(_features, _labels) {\n                features = _features;\n                labels = _labels;\n            }\n        };\n\t })\n\t.config(['$httpProvider', '$stateProvider', '$urlRouterProvider',\n  function($httpProvider, $stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('select', {\n        url: '/select',\n        templateUrl: 'select.html',\n        controller: 'SelectCtrl'\n      })\n      .state('collect', {\n        url: '/collect',\n        templateUrl: 'collect.html',\n        controller: 'CollectCtrl',\n      });\n\n    $urlRouterProvider.otherwise('/select');\n  }\n]);\n","/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\nexport default function($scope, $filter, $location, $templateRequest, $sce, sharedConfig) {\n  'ngInject';\n\n  /* Get previously defined features and labels */\n  var features = sharedConfig.getFeatures();\n  var labels = sharedConfig.getLabels();\n\n  /* Generate unique ID for dataset */\n  var pr = '',\n    en = false,\n    uniqid;\n\n  this.seed = function(s, w) {\n    s = parseInt(s, 10).toString(16);\n    return w < s.length ? s.slice(s.length - w) : (w > s.length) ? new Array(1 + (w - s.length)).join('0') + s : s;\n  };\n\n  uniqid = pr + this.seed(parseInt(new Date().getTime() / 1000, 10), 8) + this.seed(Math.floor(Math.random() * 0x75bcd15) + 1, 5);\n\n  if (en) uniqid += (Math.random() * 10).toFixed(8).toString();\n\n  /* Parse UserAgent using darcyclarke/Detect.js */\n  var ua = detect.parse(navigator.userAgent);\n\n  /* Sandbox for all feature collect scripts */\n  var sandbox = {\n    send: function(data) {\n      console.log(data);\n      data.id = uniqid;\n      data.timestamp = Date.now();\n      data.useragent = ua.device.manufacturer + \"_\" + ua.device.name + \"_\" + ua.browser.family + \"_\" + ua.browser.major;\n      data.labels = labels;\n      var json = JSON.stringify(data);\n      if (json !== '{}') {\n        var req = new XMLHttpRequest();\n        req.open('POST', \"http://docker.teco.edu:3000/api/features/\" + data.sensor);\n        req.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n        req.send(json);\n      }\n    }\n  };\n\n  $scope.HTML = \"\";\n\n  var sensors = [];\n\n  features.forEach(function(key) {\n    if (typeof(key.html) != \"undefined\" && key.html !== \"\") {\n      console.log(\"html/\" + key.html);\n\n      $templateRequest(\"html/\" + key.html).then(function(html) {\n        $scope.sensorHTML = $sce.trustAsHtml(html);\n      });\n    }\n    //$scope.HTML = $scope.HTML + $templateCache.get(\"html/\" + key.html);\n    /*\n    \t\t// DOM: Create the script element\n    \t    var jsElm = document.createElement(\"script\");\n    \t    // set the type attribute\n    \t    jsElm.type = \"application/javascript\";\n    \t    // make the script element load file\n    \t    jsElm.src = \"scripts/\" + key.script;\n    \t    // finally insert the element to the body element in order to load the script\n    \t    document.body.appendChild(jsElm);\n\n\n    \t\tjsElm.onload = function() {\n\n    \t\t};*/\n    //inject.js(\"scripts/\" + key.script, function() {\n    var sensor = new window[key.feature](sandbox);\n    sensors.push(sensor);\n    //});\n  });\n\n  $scope.timerRunning = false;\n\n  $scope.start = function(deadline) {\n    $scope.$broadcast('timer-start');\n    $scope.timerRunning = true;\n    sensors.forEach(function(sensor) {\n      sensor.start();\n    });\n  };\n\n  $scope.stop = function() {\n    console.log(\"stop\");\n    $scope.timerRunning = false;\n    sensors.forEach(function(sensor) {\n      sensor.stop();\n      delete window.sensor;\n    });\n    $location.path(\"/sensor\");\n  };\n\n}\n","/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\nexport default function($scope, $filter, $location, ModelService, sharedConfig) {\n  'ngInject';\n\n  /* Parse UserAgent using darcyclarke/Detect.js */\n  $scope.ua = detect.parse(navigator.userAgent);\n\n  /* Get Features using AJAX and generate sensor dependency list */\n  $scope.features = [];\n  $scope.sensors = [];\n\n  ModelService.getFeatures().then(function(data) {\n    $scope.features = data;\n    $scope.sensors = $filter('feature')($scope.features.data);\n  });\n\n  /* Watch for newly selected features and change sensor depency list accordingly */\n  $scope.$watch('features', function(newVal, oldVal, scope) {\n    $scope.sensors = $filter('feature')($scope.features.data);\n  }, true);\n\n\n  /* Get Labels and prepare them using mbenford/ngTagsInput */\n  $scope.labels = [];\n\n  $scope.loadLabels = function($query) {\n    return ModelService.getLabels().then(function(response) {\n      var labels = response.data;\n      return labels.filter(function(label) {\n        return label.name.toLowerCase().indexOf($query.toLowerCase()) != -1;\n      });\n    });\n  };\n\n  /* Advance to collect page */\n  $scope.next = function() {\n    /* Add new labels to database */\n    var labels = [];\n    $scope.labels.forEach(function(label, index) {\n      /* Label variable is undefined for new labels */\n      if (typeof label.label === 'undefined') {\n        /* Generate machine-readable string as identifier (only alphanumeric with dash) */\n        $scope.labels[index].label = label.name.replace(/([^a-z0-9]+)/gi, '-').toLowerCase();\n        var data = {\n          label: label.label,\n          name: label.name\n        };\n        /* Send new label to database */\n        var json = JSON.stringify(data);\n        if (json !== '{}') {\n          var req = new XMLHttpRequest();\n          req.open('POST', \"http://docker.teco.edu:3000/api/labels\");\n          req.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n          req.send(json);\n        }\n      }\n      /* Push each defined label on array */\n      labels.push(label.label);\n    });\n\n    /* Only pass on selected features */\n    var features = $filter('filter')($scope.features.data, {\n      value: true\n    });\n\n    sharedConfig.setConfig(features, labels);\n    $location.path(\"/collect\");\n  };\n\n}\n","/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\nexport default function featureFilter() {\n  return function(input) {\n    if (typeof input !== 'undefined') {\n      var result = [];\n      input.forEach(function(entry) {\n        if (entry.value === true) {\n          result.push(entry.feature);\n        }\n      });\n      result = [...new Set(result)];\n      var features = [];\n      result.forEach(function(entry) {\n        var feature = {};\n        feature.name = entry;\n        feature.support = Modernizr[entry];\n        features.push(feature);\n      });\n      return features;\n    }\n  };\n}\n","/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\nexport default function labelFilter() {\n  return function(input) {\n    if (typeof input !== 'undefined') {\n      var result = [];\n      input.forEach(function(entry) {\n        if (entry.value === true) {\n          result.concat(entry.sensors);\n        }\n      });\n      result = [...new Set(result)];\n      var sensors = [];\n      result.forEach(function(entry) {\n        var sensor = {};\n        sensor.name = entry;\n        sensor.support = Modernizr[entry];\n        sensors.push(sensor);\n      });\n      return sensors;\n    }\n  };\n}\n","/*\n\tCopyright 2016 KIT Institute for Telematics TecO - David Greiner\n\tThis file is subject to the terms and conditions defined in\n\tfile 'LICENSE', which is part of this source code package.\n*/\n\nexport default class ModelService {\n\n  /*@ngInject*/\n  constructor($http, $q) {\n    this.$http = $http;\n    this.$q = $q;\n  }\n\n  getFeatures() {\n    var deferred = this.$q.defer();\n    this.$http.get('http://docker.teco.edu:3000/api/features').then(function(data) {\n      deferred.resolve(data);\n    });\n\n    return deferred.promise;\n  }\n  getLabels() {\n    var deferred = this.$q.defer();\n    this.$http.get('http://docker.teco.edu:3000/api/labels').then(function(data) {\n      deferred.resolve(data);\n    });\n\n    return deferred.promise;\n  }\n}\n"],"sourceRoot":"/source/"}