!function e(t,r,n){function o(s,l){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!l&&u)return u(s,!0);if(a)return a(s,!0);var i=new Error("Cannot find module '"+s+"'");throw i.code="MODULE_NOT_FOUND",i}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=e("./controllers/ButtonsCtrl"),a=n(o),s=e("./controllers/SensorCtrl"),l=n(s),u=e("./services/ModelService"),i=n(u),c=e("./filters/sensorFilter"),f=n(c),d=e("./filters/labelFilter"),p=n(d);angular.module("myApp",["ui.bootstrap","ui.router","timer"]).service("ModelService",i["default"]).controller("ButtonsCtrl",a["default"]).controller("SensorCtrl",l["default"]).filter("sensor",f["default"]).filter("label",p["default"]).service("sharedConfig",function(){var e={},t="";return{getFeatures:function(){return e},getLabel:function(){return t},setConfig:function(r,n){e=r,t=n}}}).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(e,t,r){t.state("collect",{url:"/collect",templateUrl:"collect.html",controller:"ButtonsCtrl"}).state("sensor",{url:"/sensor",templateUrl:"sensor.html",controller:"SensorCtrl"}),r.otherwise("/collect")}])},{"./controllers/ButtonsCtrl":2,"./controllers/SensorCtrl":3,"./filters/labelFilter":4,"./filters/sensorFilter":5,"./services/ModelService":6}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=["$scope","$filter","$location","ModelService","sharedConfig",function(e,t,r,n,o){"ngInject";function a(e){return e.replace(/([^a-z0-9]+)/gi,"-").toLowerCase()}e.ua=detect.parse(navigator.userAgent),e.labelMessage="",console.log(detect.parse(navigator.userAgent));var s=n.getFeatures();s.then(function(r){e.features=r,e.sensors=t("sensor")(e.features.data),console.log(e.sensors)});var l=n.getLabels();l.then(function(t){e.labels=t.data,e.myName=e.labels[0].name}),e.changeLabel=function(t){e.myName=t},e.$watch(function(t){return e.myName},function(){-1==e.labels.map(function(e){return e.name}).indexOf(e.myName)?e.labelMessage="You're creating a new label "+e.myName+" ("+a(e.myName)+")":e.labelMessage=""}),e.next=function(){var n,s=t("filter")(e.features.data,{value:!0}),l=e.labels.map(function(e){return e.name}).indexOf(e.myName);if(-1==l){n=a(e.myName);var u={label:n,name:e.myName},i=JSON.stringify(u);if("{}"!==i){var c=new XMLHttpRequest;c.open("POST","http://docker.teco.edu:3000/labels"),c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),c.send(i)}}else n=e.labels[l].label;console.log("Label: "+n),o.setConfig(s,n),r.path("/sensor")},e.$watch("features",function(r,n,o){e.sensors=t("sensor")(e.features.data),console.log(e.sensors)},!0)}],t.exports=r["default"]},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=["$scope","$filter","$location","$templateRequest","$sce","sharedConfig",function(e,t,r,n,o,a){"ngInject";var s=a.getFeatures(),l=a.getLabel();console.log(s);var u,i="",c=!1;this.seed=function(e,t){return e=parseInt(e,10).toString(16),t<e.length?e.slice(e.length-t):t>e.length?new Array(1+(t-e.length)).join("0")+e:e},u=i+this.seed(parseInt((new Date).getTime()/1e3,10),8)+this.seed(Math.floor(123456789*Math.random())+1,5),c&&(u+=(10*Math.random()).toFixed(8).toString());var f=detect.parse(navigator.userAgent),d={send:function(e){console.log(e),e.id=u,e.timestamp=Date.now(),e.label=l,e.useragent=f.device.manufacturer+"_"+f.device.name+"_"+f.browser.family+"_"+f.browser.major;var t=JSON.stringify(e);if("{}"!==t){var r=new XMLHttpRequest;r.open("POST","http://docker.teco.edu:3000/api/features/"+e.sensor),r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.send(t)}}};e.HTML="";var p=[];s.forEach(function(t){"undefined"!=typeof t.html&&""!==t.html&&(console.log("html/"+t.html),n("html/"+t.html).then(function(t){e.sensorHTML=o.trustAsHtml(t)}));var r=new window[t.feature](d);p.push(r)}),e.timerRunning=!1,e.start=function(t){e.$broadcast("timer-start"),e.timerRunning=!0,p.forEach(function(e){e.start()})},e.stop=function(){console.log("stop"),e.timerRunning=!1,p.forEach(function(e){e.stop(),delete window.sensor}),r.path("/sensor")}}],t.exports=r["default"]},{}],4:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(){return function(e){if("undefined"!=typeof e){var t=[];e.forEach(function(e){e.value===!0&&t.concat(e.sensors)}),t=[].concat(n(new Set(t)));var r=[];return t.forEach(function(e){var t={};t.name=e,t.support=Modernizr[e],r.push(t)}),console.log(r),r}}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=o,t.exports=r["default"]},{}],5:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(){return function(e){if("undefined"!=typeof e){var t=[];e.forEach(function(e){e.value===!0&&t.push(e.feature)}),t=[].concat(n(new Set(t)));var r=[];return t.forEach(function(e){var t={};t.name=e,t.support=Modernizr[e],r.push(t)}),console.log(r),r}}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=o,t.exports=r["default"]},{}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this.$http=t,this.$q=r}return e.$inject=["$http","$q"],o(e,[{key:"getFeatures",value:function(){var e=this.$q.defer();return this.$http.get("http://docker.teco.edu:3000/api/features").then(function(t){e.resolve(t)}),e.promise}},{key:"getLabels",value:function(){var e=this.$q.defer();return this.$http.get("http://docker.teco.edu:3000/api/labels").then(function(t){e.resolve(t)}),e.promise}}]),e}();r["default"]=a,t.exports=r["default"]},{}]},{},[1]);
//# sourceMappingURL=app.min.js.map
